# Mini Task Management System - 系统设计文档

## 1. 系统概述

### 1.1 项目简介
Mini Task Management System 是一个轻量级的任务管理系统，采用经典的三层架构设计，提供用户管理、项目管理和任务管理功能。系统设计简洁、易于维护，适合中小型团队使用。

### 1.2 技术选型

| 技术栈 | 版本 | 用途 |
|--------|------|------|
| Spring Boot | 3.2.5 | 应用框架 |
| MyBatis-Plus | 3.5.7 | ORM框架 |
| MySQL | 8.0 | 数据库 |
| Maven | 3.6+ | 构建工具 |
| Lombok | 1.18+ | 代码简化 |
| Jackson | 2.15+ | JSON序列化 |

---

## 2. 系统架构

### 2.1 总体架构图

```
┌─────────────────────────────────────────────────────────┐
│                    Client Layer                         │
│                 (HTTP Clients)                         │
└─────────────────────┬───────────────────────────────────┘
                      │ HTTP/JSON
┌─────────────────────┴───────────────────────────────────┐
│                Controller Layer                         │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────────────┐│
│  │    User     │ │   Project   │ │        Task         ││
│  │ Controller  │ │ Controller  │ │    Controller       ││
│  └─────────────┘ └─────────────┘ └─────────────────────┘│
└─────────────────────┬───────────────────────────────────┘
                      │
┌─────────────────────┴───────────────────────────────────┐
│                 Service Layer                           │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────────────┐│
│  │    User     │ │   Project   │ │        Task         ││
│  │   Service   │ │   Service   │ │      Service        ││
│  └─────────────┘ └─────────────┘ └─────────────────────┘│
└─────────────────────┬───────────────────────────────────┘
                      │
┌─────────────────────┴───────────────────────────────────┐
│                 Mapper Layer                            │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────────────┐│
│  │    User     │ │   Project   │ │        Task         ││
│  │   Mapper    │ │   Mapper    │ │       Mapper        ││
│  └─────────────┘ └─────────────┘ └─────────────────────┘│
└─────────────────────┬───────────────────────────────────┘
                      │ MyBatis-Plus
┌─────────────────────┴───────────────────────────────────┐
│                 Database Layer                          │
│                    MySQL 8.0                           │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────────────┐│
│  │    user     │ │   project   │ │        task         ││
│  │    table    │ │    table    │ │       table         ││
│  └─────────────┘ └─────────────┘ └─────────────────────┘│
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2.2 分层架构说明

#### 2.2.1 Controller层（控制层）
**职责**: 处理HTTP请求，参数验证，响应格式化
- 接收和解析HTTP请求
- 参数验证和格式转换
- 调用Service层业务逻辑
- 统一响应格式处理
- 异常处理和错误响应

**关键组件**:
- `UserController`: 用户管理相关接口
- `ProjectController`: 项目管理相关接口  
- `TaskController`: 任务管理相关接口
- `ApiResponse`: 统一响应格式

#### 2.2.2 Service层（业务层）
**职责**: 业务逻辑处理，数据校验，事务管理
- 核心业务逻辑实现
- 数据有效性校验
- 跨表操作协调
- 业务规则验证

**关键组件**:
- `UserService`: 用户相关业务逻辑
- `ProjectService`: 项目相关业务逻辑
- `TaskService`: 任务相关业务逻辑

#### 2.2.3 Mapper层（数据访问层）
**职责**: 数据库操作，SQL执行
- 数据库CRUD操作
- 复杂查询实现
- 数据映射转换
- MyBatis-Plus集成

**关键组件**:
- `UserMapper`: 用户数据访问
- `ProjectMapper`: 项目数据访问
- `TaskMapper`: 任务数据访问

#### 2.2.4 Entity层（实体层）
**职责**: 数据模型定义，数据库映射
- 数据表结构映射
- 字段约束定义
- 关联关系配置
- 序列化配置

---

## 3. 核心模块设计

### 3.1 用户管理模块

#### 3.1.1 功能描述
- 用户注册：创建新用户账号
- 用户登录：验证用户身份
- 用户信息管理：查询用户基本信息

#### 3.1.2 核心流程
```
用户注册流程:
Client → UserController → UserService → UserMapper → Database
  ↓
验证用户名/邮箱唯一性 → 密码加密 → 保存用户信息 → 返回用户信息

用户登录流程:
Client → UserController → UserService → UserMapper → Database
  ↓
验证用户名 → 验证密码 → 返回用户信息
```

### 3.2 项目管理模块

#### 3.2.1 功能描述
- 项目创建：用户创建新项目
- 项目查询：获取用户的项目列表和详情
- 项目更新：修改项目信息
- 项目删除：逻辑删除项目及相关任务

#### 3.2.2 核心流程
```
项目创建流程:
Client → ProjectController → ProjectService → ProjectMapper → Database
  ↓
验证用户存在 → 创建项目 → 返回项目信息

项目删除流程:
Client → ProjectController → ProjectService → ProjectMapper/TaskMapper → Database
  ↓
验证项目所有权 → 逻辑删除项目 → 逻辑删除相关任务 → 返回成功响应
```

### 3.3 任务管理模块

#### 3.3.1 功能描述
- 任务创建：在项目中创建新任务
- 任务查询：获取项目的任务列表，支持筛选和排序
- 任务更新：修改任务信息、状态、优先级
- 任务删除：逻辑删除任务

#### 3.3.2 核心流程
```
任务创建流程:
Client → TaskController → TaskService → ProjectService/TaskMapper → Database
  ↓
验证项目存在且属于用户 → 创建任务 → 返回任务信息

任务查询流程:
Client → TaskController → TaskService → TaskMapper → Database
  ↓
验证项目权限 → 构建查询条件 → 执行查询 → 返回任务列表
```

---
